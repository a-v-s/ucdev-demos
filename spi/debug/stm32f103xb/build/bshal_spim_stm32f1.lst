ARM GAS  /tmp/ccxOFJ1B.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bshal_spim_stm32f1.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.bss.m_spim,"aw",%nobits
  16              		.align	2
  19              	m_spim:
  20 0000 00000000 		.space	352
  20      00000000 
  20      00000000 
  20      00000000 
  20      00000000 
  21              		.section	.text.bshal_spim_config,"ax",%progbits
  22              		.align	1
  23              		.global	bshal_spim_config
  24              		.arch armv7-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu softvfp
  30              	bshal_spim_config:
  31              	.LFB65:
  32              		.file 1 "../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c"
   1:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include <stdlib.h>
   2:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include <stdint.h>
   3:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include <stdbool.h>
   4:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
   5:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
   6:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include "hal.h"
   7:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include "bshal_spim.h"
   8:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #include "bshal_gpio_stm32.h"
   9:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  10:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** static SPI_HandleTypeDef m_spim[4];
  11:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  12:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** int bshal_spim_config(bshal_spim_t *config) {
  33              		.loc 1 12 45
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 40
  36              		@ frame_needed = 1, uses_anonymous_args = 0
  37 0000 80B5     		push	{r7, lr}
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 7, -8
  40              		.cfi_offset 14, -4
  41 0002 8AB0     		sub	sp, sp, #40
  42              		.cfi_def_cfa_offset 48
  43 0004 00AF     		add	r7, sp, #0
  44              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccxOFJ1B.s 			page 2


  45 0006 7860     		str	r0, [r7, #4]
  46              	.LBB2:
  13:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  14:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	__HAL_RCC_GPIOB_CLK_ENABLE();
  47              		.loc 1 14 2
  48 0008 734B     		ldr	r3, .L25
  49 000a 9B69     		ldr	r3, [r3, #24]
  50 000c 724A     		ldr	r2, .L25
  51 000e 43F00803 		orr	r3, r3, #8
  52 0012 9361     		str	r3, [r2, #24]
  53 0014 704B     		ldr	r3, .L25
  54 0016 9B69     		ldr	r3, [r3, #24]
  55 0018 03F00803 		and	r3, r3, #8
  56 001c 7B61     		str	r3, [r7, #20]
  57 001e 7B69     		ldr	r3, [r7, #20]
  58              	.LBE2:
  59              	.LBB3:
  15:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	__HAL_RCC_GPIOA_CLK_ENABLE();
  60              		.loc 1 15 2
  61 0020 6D4B     		ldr	r3, .L25
  62 0022 9B69     		ldr	r3, [r3, #24]
  63 0024 6C4A     		ldr	r2, .L25
  64 0026 43F00403 		orr	r3, r3, #4
  65 002a 9361     		str	r3, [r2, #24]
  66 002c 6A4B     		ldr	r3, .L25
  67 002e 9B69     		ldr	r3, [r3, #24]
  68 0030 03F00403 		and	r3, r3, #4
  69 0034 3B61     		str	r3, [r7, #16]
  70 0036 3B69     		ldr	r3, [r7, #16]
  71              	.LBE3:
  16:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  17:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  18:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  19:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// PCLK1 to APB1 Peripherals (page 93)
  20:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// PCLK2 to APB2 Peripherals (page 93)
  21:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  22:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// SPI1  	is  on APB2 (page 47) thus uses PCLK2_Frequency
  23:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// SPI2,3   are on APB1 (page 47) thus use  PCLK1_Frequency
  24:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  25:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	SPI_HandleTypeDef *handle;
  26:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int spi_clock;
  27:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	switch (config->hw_nr) {
  72              		.loc 1 27 16
  73 0038 7B68     		ldr	r3, [r7, #4]
  74 003a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
  75              		.loc 1 27 2
  76 003c 012B     		cmp	r3, #1
  77 003e 02D0     		beq	.L2
  78 0040 022B     		cmp	r3, #2
  79 0042 16D0     		beq	.L3
  80 0044 2CE0     		b	.L24
  81              	.L2:
  28:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #ifdef SPI1
  29:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 1:
  30:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		m_spim[1].Instance = SPI1;
  82              		.loc 1 30 22
  83 0046 654B     		ldr	r3, .L25+4
ARM GAS  /tmp/ccxOFJ1B.s 			page 3


  84 0048 654A     		ldr	r2, .L25+8
  85 004a 9A65     		str	r2, [r3, #88]
  31:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle = &m_spim[1];
  86              		.loc 1 31 10
  87 004c 654B     		ldr	r3, .L25+12
  88 004e 7B62     		str	r3, [r7, #36]
  32:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		spi_clock = HAL_RCC_GetPCLK2Freq();
  89              		.loc 1 32 15
  90 0050 FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
  91 0054 0346     		mov	r3, r0
  92              		.loc 1 32 13
  93 0056 3B62     		str	r3, [r7, #32]
  94              	.LBB4:
  33:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		__HAL_RCC_SPI1_CLK_ENABLE();
  95              		.loc 1 33 3
  96 0058 5F4B     		ldr	r3, .L25
  97 005a 9B69     		ldr	r3, [r3, #24]
  98 005c 5E4A     		ldr	r2, .L25
  99 005e 43F48053 		orr	r3, r3, #4096
 100 0062 9361     		str	r3, [r2, #24]
 101 0064 5C4B     		ldr	r3, .L25
 102 0066 9B69     		ldr	r3, [r3, #24]
 103 0068 03F48053 		and	r3, r3, #4096
 104 006c FB60     		str	r3, [r7, #12]
 105 006e FB68     		ldr	r3, [r7, #12]
 106              	.LBE4:
  34:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 107              		.loc 1 34 3
 108 0070 19E0     		b	.L5
 109              	.L3:
  35:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #endif
  36:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #ifdef SPI2
  37:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 2:
  38:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		m_spim[2].Instance = SPI2;
 110              		.loc 1 38 22
 111 0072 5A4B     		ldr	r3, .L25+4
 112 0074 5C4A     		ldr	r2, .L25+16
 113 0076 C3F8B020 		str	r2, [r3, #176]
  39:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		spi_clock = HAL_RCC_GetPCLK1Freq();
 114              		.loc 1 39 15
 115 007a FFF7FEFF 		bl	HAL_RCC_GetPCLK1Freq
 116 007e 0346     		mov	r3, r0
 117              		.loc 1 39 13
 118 0080 3B62     		str	r3, [r7, #32]
  40:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle = &m_spim[2];
 119              		.loc 1 40 10
 120 0082 5A4B     		ldr	r3, .L25+20
 121 0084 7B62     		str	r3, [r7, #36]
 122              	.LBB5:
  41:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		__HAL_RCC_SPI2_CLK_ENABLE();
 123              		.loc 1 41 3
 124 0086 544B     		ldr	r3, .L25
 125 0088 DB69     		ldr	r3, [r3, #28]
 126 008a 534A     		ldr	r2, .L25
 127 008c 43F48043 		orr	r3, r3, #16384
 128 0090 D361     		str	r3, [r2, #28]
 129 0092 514B     		ldr	r3, .L25
ARM GAS  /tmp/ccxOFJ1B.s 			page 4


 130 0094 DB69     		ldr	r3, [r3, #28]
 131 0096 03F48043 		and	r3, r3, #16384
 132 009a BB60     		str	r3, [r7, #8]
 133 009c BB68     		ldr	r3, [r7, #8]
 134              	.LBE5:
  42:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 135              		.loc 1 42 3
 136 009e 02E0     		b	.L5
 137              	.L24:
  43:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #endif
  44:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #ifdef SPI3
  45:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 3:
  46:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		m_spim[3].Instance = SPI3;
  47:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		spi_clock = HAL_RCC_GetPCLK1Freq();
  48:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle = &m_spim[3];
  49:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		__HAL_RCC_SPI3_CLK_ENABLE();
  50:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
  51:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** #endif
  52:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	default:
  53:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		return -1;
 138              		.loc 1 53 10
 139 00a0 4FF0FF33 		mov	r3, #-1
 140 00a4 93E0     		b	.L6
 141              	.L5:
  54:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	}
  55:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  56:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	config->drv_specific = handle;
 142              		.loc 1 56 23
 143 00a6 7B68     		ldr	r3, [r7, #4]
 144 00a8 7A6A     		ldr	r2, [r7, #36]
 145 00aa 1A60     		str	r2, [r3]
  57:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  58:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.Mode = SPI_MODE_MASTER;
 146              		.loc 1 58 20
 147 00ac 7B6A     		ldr	r3, [r7, #36]
 148 00ae 4FF48272 		mov	r2, #260
 149 00b2 5A60     		str	r2, [r3, #4]
  59:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.Direction = SPI_DIRECTION_2LINES;
 150              		.loc 1 59 25
 151 00b4 7B6A     		ldr	r3, [r7, #36]
 152 00b6 0022     		movs	r2, #0
 153 00b8 9A60     		str	r2, [r3, #8]
  60:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.DataSize = SPI_DATASIZE_8BIT;
 154              		.loc 1 60 24
 155 00ba 7B6A     		ldr	r3, [r7, #36]
 156 00bc 0022     		movs	r2, #0
 157 00be DA60     		str	r2, [r3, #12]
  61:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.NSS = SPI_NSS_SOFT;
 158              		.loc 1 61 19
 159 00c0 7B6A     		ldr	r3, [r7, #36]
 160 00c2 4FF40072 		mov	r2, #512
 161 00c6 9A61     		str	r2, [r3, #24]
  62:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.TIMode = SPI_TIMODE_DISABLE;
 162              		.loc 1 62 22
 163 00c8 7B6A     		ldr	r3, [r7, #36]
 164 00ca 0022     		movs	r2, #0
 165 00cc 5A62     		str	r2, [r3, #36]
ARM GAS  /tmp/ccxOFJ1B.s 			page 5


  63:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  64:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (config->bit_order)
 166              		.loc 1 64 12
 167 00ce 7B68     		ldr	r3, [r7, #4]
 168 00d0 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 169              		.loc 1 64 5
 170 00d2 002B     		cmp	r3, #0
 171 00d4 03D0     		beq	.L7
  65:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.FirstBit = SPI_FIRSTBIT_LSB;
 172              		.loc 1 65 25
 173 00d6 7B6A     		ldr	r3, [r7, #36]
 174 00d8 8022     		movs	r2, #128
 175 00da 1A62     		str	r2, [r3, #32]
 176 00dc 02E0     		b	.L8
 177              	.L7:
  66:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	else
  67:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.FirstBit = SPI_FIRSTBIT_MSB;
 178              		.loc 1 67 25
 179 00de 7B6A     		ldr	r3, [r7, #36]
 180 00e0 0022     		movs	r2, #0
 181 00e2 1A62     		str	r2, [r3, #32]
 182              	.L8:
  68:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  69:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int clk_div = spi_clock / config->frequency;
 183              		.loc 1 69 26
 184 00e4 3A6A     		ldr	r2, [r7, #32]
 185              		.loc 1 69 34
 186 00e6 7B68     		ldr	r3, [r7, #4]
 187 00e8 1B69     		ldr	r3, [r3, #16]
 188              		.loc 1 69 26
 189 00ea B2FBF3F3 		udiv	r3, r2, r3
 190              		.loc 1 69 6
 191 00ee FB61     		str	r3, [r7, #28]
  70:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int clk_mod = spi_clock % config->frequency;
 192              		.loc 1 70 26
 193 00f0 3B6A     		ldr	r3, [r7, #32]
 194              		.loc 1 70 34
 195 00f2 7A68     		ldr	r2, [r7, #4]
 196 00f4 1269     		ldr	r2, [r2, #16]
 197              		.loc 1 70 26
 198 00f6 B3FBF2F1 		udiv	r1, r3, r2
 199 00fa 01FB02F2 		mul	r2, r1, r2
 200 00fe 9B1A     		subs	r3, r3, r2
 201              		.loc 1 70 6
 202 0100 BB61     		str	r3, [r7, #24]
  71:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_mod)
 203              		.loc 1 71 5
 204 0102 BB69     		ldr	r3, [r7, #24]
 205 0104 002B     		cmp	r3, #0
 206 0106 02D0     		beq	.L9
  72:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		clk_div++;
 207              		.loc 1 72 10
 208 0108 FB69     		ldr	r3, [r7, #28]
 209 010a 0133     		adds	r3, r3, #1
 210 010c FB61     		str	r3, [r7, #28]
 211              	.L9:
  73:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
ARM GAS  /tmp/ccxOFJ1B.s 			page 6


  74:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_256;
 212              		.loc 1 74 33
 213 010e 7B6A     		ldr	r3, [r7, #36]
 214 0110 3822     		movs	r2, #56
 215 0112 DA61     		str	r2, [r3, #28]
  75:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 128)
 216              		.loc 1 75 5
 217 0114 FB69     		ldr	r3, [r7, #28]
 218 0116 802B     		cmp	r3, #128
 219 0118 02DC     		bgt	.L10
  76:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128;
 220              		.loc 1 76 34
 221 011a 7B6A     		ldr	r3, [r7, #36]
 222 011c 3022     		movs	r2, #48
 223 011e DA61     		str	r2, [r3, #28]
 224              	.L10:
  77:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 64)
 225              		.loc 1 77 5
 226 0120 FB69     		ldr	r3, [r7, #28]
 227 0122 402B     		cmp	r3, #64
 228 0124 02DC     		bgt	.L11
  78:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_64;
 229              		.loc 1 78 34
 230 0126 7B6A     		ldr	r3, [r7, #36]
 231 0128 2822     		movs	r2, #40
 232 012a DA61     		str	r2, [r3, #28]
 233              	.L11:
  79:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 32)
 234              		.loc 1 79 5
 235 012c FB69     		ldr	r3, [r7, #28]
 236 012e 202B     		cmp	r3, #32
 237 0130 02DC     		bgt	.L12
  80:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_32;
 238              		.loc 1 80 34
 239 0132 7B6A     		ldr	r3, [r7, #36]
 240 0134 2022     		movs	r2, #32
 241 0136 DA61     		str	r2, [r3, #28]
 242              	.L12:
  81:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 16)
 243              		.loc 1 81 5
 244 0138 FB69     		ldr	r3, [r7, #28]
 245 013a 102B     		cmp	r3, #16
 246 013c 02DC     		bgt	.L13
  82:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
 247              		.loc 1 82 34
 248 013e 7B6A     		ldr	r3, [r7, #36]
 249 0140 1822     		movs	r2, #24
 250 0142 DA61     		str	r2, [r3, #28]
 251              	.L13:
  83:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 8)
 252              		.loc 1 83 5
 253 0144 FB69     		ldr	r3, [r7, #28]
 254 0146 082B     		cmp	r3, #8
 255 0148 02DC     		bgt	.L14
  84:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_8;
 256              		.loc 1 84 34
 257 014a 7B6A     		ldr	r3, [r7, #36]
ARM GAS  /tmp/ccxOFJ1B.s 			page 7


 258 014c 1022     		movs	r2, #16
 259 014e DA61     		str	r2, [r3, #28]
 260              	.L14:
  85:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 4)
 261              		.loc 1 85 5
 262 0150 FB69     		ldr	r3, [r7, #28]
 263 0152 042B     		cmp	r3, #4
 264 0154 02DC     		bgt	.L15
  86:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 265              		.loc 1 86 34
 266 0156 7B6A     		ldr	r3, [r7, #36]
 267 0158 0822     		movs	r2, #8
 268 015a DA61     		str	r2, [r3, #28]
 269              	.L15:
  87:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (clk_div <= 2)
 270              		.loc 1 87 5
 271 015c FB69     		ldr	r3, [r7, #28]
 272 015e 022B     		cmp	r3, #2
 273 0160 02DC     		bgt	.L16
  88:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_2;
 274              		.loc 1 88 34
 275 0162 7B6A     		ldr	r3, [r7, #36]
 276 0164 0022     		movs	r2, #0
 277 0166 DA61     		str	r2, [r3, #28]
 278              	.L16:
  89:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
  90:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	switch (config->mode) {
 279              		.loc 1 90 16
 280 0168 7B68     		ldr	r3, [r7, #4]
 281 016a DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 282              		.loc 1 90 2
 283 016c 032B     		cmp	r3, #3
 284 016e 27D8     		bhi	.L17
 285 0170 01A2     		adr	r2, .L19
 286 0172 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 287 0176 00BF     		.p2align 2
 288              	.L19:
 289 0178 89010000 		.word	.L22+1
 290 017c 97010000 		.word	.L21+1
 291 0180 A5010000 		.word	.L20+1
 292 0184 B3010000 		.word	.L18+1
 293              		.p2align 1
 294              	.L22:
  91:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 0:
  92:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPolarity = SPI_POLARITY_LOW;
 295              		.loc 1 92 28
 296 0188 7B6A     		ldr	r3, [r7, #36]
 297 018a 0022     		movs	r2, #0
 298 018c 1A61     		str	r2, [r3, #16]
  93:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPhase = SPI_PHASE_1EDGE;
 299              		.loc 1 93 25
 300 018e 7B6A     		ldr	r3, [r7, #36]
 301 0190 0022     		movs	r2, #0
 302 0192 5A61     		str	r2, [r3, #20]
  94:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 303              		.loc 1 94 3
 304 0194 17E0     		b	.L23
ARM GAS  /tmp/ccxOFJ1B.s 			page 8


 305              	.L21:
  95:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 1:
  96:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPolarity = SPI_POLARITY_LOW;
 306              		.loc 1 96 28
 307 0196 7B6A     		ldr	r3, [r7, #36]
 308 0198 0022     		movs	r2, #0
 309 019a 1A61     		str	r2, [r3, #16]
  97:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPhase = SPI_PHASE_2EDGE;
 310              		.loc 1 97 25
 311 019c 7B6A     		ldr	r3, [r7, #36]
 312 019e 0122     		movs	r2, #1
 313 01a0 5A61     		str	r2, [r3, #20]
  98:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 314              		.loc 1 98 3
 315 01a2 10E0     		b	.L23
 316              	.L20:
  99:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 2:
 100:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPolarity = SPI_POLARITY_LOW;
 317              		.loc 1 100 28
 318 01a4 7B6A     		ldr	r3, [r7, #36]
 319 01a6 0022     		movs	r2, #0
 320 01a8 1A61     		str	r2, [r3, #16]
 101:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 				handle->Init.CLKPhase = SPI_PHASE_2EDGE;
 321              		.loc 1 101 27
 322 01aa 7B6A     		ldr	r3, [r7, #36]
 323 01ac 0122     		movs	r2, #1
 324 01ae 5A61     		str	r2, [r3, #20]
 102:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 325              		.loc 1 102 3
 326 01b0 09E0     		b	.L23
 327              	.L18:
 103:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	case 3:
 104:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPolarity = SPI_POLARITY_HIGH;
 328              		.loc 1 104 28
 329 01b2 7B6A     		ldr	r3, [r7, #36]
 330 01b4 0222     		movs	r2, #2
 331 01b6 1A61     		str	r2, [r3, #16]
 105:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		handle->Init.CLKPhase = SPI_PHASE_2EDGE;
 332              		.loc 1 105 25
 333 01b8 7B6A     		ldr	r3, [r7, #36]
 334 01ba 0122     		movs	r2, #1
 335 01bc 5A61     		str	r2, [r3, #20]
 106:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		break;
 336              		.loc 1 106 3
 337 01be 02E0     		b	.L23
 338              	.L17:
 107:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	default:
 108:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		return -1;
 339              		.loc 1 108 10
 340 01c0 4FF0FF33 		mov	r3, #-1
 341 01c4 03E0     		b	.L6
 342              	.L23:
 109:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	}
 110:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 111:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	return HAL_SPI_Init(handle);
 343              		.loc 1 111 9
 344 01c6 786A     		ldr	r0, [r7, #36]
ARM GAS  /tmp/ccxOFJ1B.s 			page 9


 345 01c8 FFF7FEFF 		bl	HAL_SPI_Init
 346 01cc 0346     		mov	r3, r0
 347              	.L6:
 112:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** }
 348              		.loc 1 112 1
 349 01ce 1846     		mov	r0, r3
 350 01d0 2837     		adds	r7, r7, #40
 351              		.cfi_def_cfa_offset 8
 352 01d2 BD46     		mov	sp, r7
 353              		.cfi_def_cfa_register 13
 354              		@ sp needed
 355 01d4 80BD     		pop	{r7, pc}
 356              	.L26:
 357 01d6 00BF     		.align	2
 358              	.L25:
 359 01d8 00100240 		.word	1073876992
 360 01dc 00000000 		.word	m_spim
 361 01e0 00300140 		.word	1073819648
 362 01e4 58000000 		.word	m_spim+88
 363 01e8 00380040 		.word	1073756160
 364 01ec B0000000 		.word	m_spim+176
 365              		.cfi_endproc
 366              	.LFE65:
 368              		.section	.text.bshal_spim_init,"ax",%progbits
 369              		.align	1
 370              		.global	bshal_spim_init
 371              		.syntax unified
 372              		.thumb
 373              		.thumb_func
 374              		.fpu softvfp
 376              	bshal_spim_init:
 377              	.LFB66:
 113:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 114:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** int bshal_spim_init(bshal_spim_t *config) {
 378              		.loc 1 114 43
 379              		.cfi_startproc
 380              		@ args = 0, pretend = 0, frame = 40
 381              		@ frame_needed = 1, uses_anonymous_args = 0
 382 0000 80B5     		push	{r7, lr}
 383              		.cfi_def_cfa_offset 8
 384              		.cfi_offset 7, -8
 385              		.cfi_offset 14, -4
 386 0002 8AB0     		sub	sp, sp, #40
 387              		.cfi_def_cfa_offset 48
 388 0004 00AF     		add	r7, sp, #0
 389              		.cfi_def_cfa_register 7
 390 0006 7860     		str	r0, [r7, #4]
 115:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int result = bshal_spim_config(config);
 391              		.loc 1 115 15
 392 0008 7868     		ldr	r0, [r7, #4]
 393 000a FFF7FEFF 		bl	bshal_spim_config
 394 000e 7862     		str	r0, [r7, #36]
 116:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (result)
 395              		.loc 1 116 5
 396 0010 7B6A     		ldr	r3, [r7, #36]
 397 0012 002B     		cmp	r3, #0
 398 0014 01D0     		beq	.L28
ARM GAS  /tmp/ccxOFJ1B.s 			page 10


 117:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		return result;
 399              		.loc 1 117 10
 400 0016 7B6A     		ldr	r3, [r7, #36]
 401 0018 AAE0     		b	.L27
 402              	.L28:
 118:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 119:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitTypeDef GPIO_InitStruct;
 120:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// Common configuration for all channels
 121:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Pull = GPIO_NOPULL;
 403              		.loc 1 121 23
 404 001a 0023     		movs	r3, #0
 405 001c FB61     		str	r3, [r7, #28]
 122:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 406              		.loc 1 122 24
 407 001e 0323     		movs	r3, #3
 408 0020 3B62     		str	r3, [r7, #32]
 123:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_TypeDef *port = NULL;
 409              		.loc 1 123 16
 410 0022 0023     		movs	r3, #0
 411 0024 3B61     		str	r3, [r7, #16]
 124:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	uint16_t pin = -1;
 412              		.loc 1 124 11
 413 0026 4FF6FF73 		movw	r3, #65535
 414 002a FB81     		strh	r3, [r7, #14]	@ movhi
 125:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 126:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->mosi_pin, &port, &pin);
 415              		.loc 1 126 2
 416 002c 7B68     		ldr	r3, [r7, #4]
 417 002e 5B79     		ldrb	r3, [r3, #5]	@ zero_extendqisi2
 418 0030 07F10E02 		add	r2, r7, #14
 419 0034 07F11001 		add	r1, r7, #16
 420 0038 1846     		mov	r0, r3
 421 003a FFF7FEFF 		bl	bshal_gpio_decode_pin
 127:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (!port)
 422              		.loc 1 127 6
 423 003e 3B69     		ldr	r3, [r7, #16]
 424              		.loc 1 127 5
 425 0040 002B     		cmp	r3, #0
 426 0042 02D1     		bne	.L30
 128:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		return -1;
 427              		.loc 1 128 10
 428 0044 4FF0FF33 		mov	r3, #-1
 429 0048 92E0     		b	.L27
 430              	.L30:
 129:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 431              		.loc 1 129 23
 432 004a 0223     		movs	r3, #2
 433 004c BB61     		str	r3, [r7, #24]
 130:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Pin = pin;
 434              		.loc 1 130 22
 435 004e FB89     		ldrh	r3, [r7, #14]
 436 0050 7B61     		str	r3, [r7, #20]
 131:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	HAL_GPIO_Init(port, &GPIO_InitStruct);
 437              		.loc 1 131 2
 438 0052 3B69     		ldr	r3, [r7, #16]
 439 0054 07F11402 		add	r2, r7, #20
 440 0058 1146     		mov	r1, r2
ARM GAS  /tmp/ccxOFJ1B.s 			page 11


 441 005a 1846     		mov	r0, r3
 442 005c FFF7FEFF 		bl	HAL_GPIO_Init
 132:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 133:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->sck_pin, &port, &pin);
 443              		.loc 1 133 2
 444 0060 7B68     		ldr	r3, [r7, #4]
 445 0062 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 446 0064 07F10E02 		add	r2, r7, #14
 447 0068 07F11001 		add	r1, r7, #16
 448 006c 1846     		mov	r0, r3
 449 006e FFF7FEFF 		bl	bshal_gpio_decode_pin
 134:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (!port)
 450              		.loc 1 134 6
 451 0072 3B69     		ldr	r3, [r7, #16]
 452              		.loc 1 134 5
 453 0074 002B     		cmp	r3, #0
 454 0076 02D1     		bne	.L31
 135:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		return -1;
 455              		.loc 1 135 10
 456 0078 4FF0FF33 		mov	r3, #-1
 457 007c 78E0     		b	.L27
 458              	.L31:
 136:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 459              		.loc 1 136 23
 460 007e 0223     		movs	r3, #2
 461 0080 BB61     		str	r3, [r7, #24]
 137:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	GPIO_InitStruct.Pin = pin;
 462              		.loc 1 137 22
 463 0082 FB89     		ldrh	r3, [r7, #14]
 464 0084 7B61     		str	r3, [r7, #20]
 138:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	HAL_GPIO_Init(port, &GPIO_InitStruct);
 465              		.loc 1 138 2
 466 0086 3B69     		ldr	r3, [r7, #16]
 467 0088 07F11402 		add	r2, r7, #20
 468 008c 1146     		mov	r1, r2
 469 008e 1846     		mov	r0, r3
 470 0090 FFF7FEFF 		bl	HAL_GPIO_Init
 139:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 140:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->miso_pin, &port, &pin);
 471              		.loc 1 140 2
 472 0094 7B68     		ldr	r3, [r7, #4]
 473 0096 9B79     		ldrb	r3, [r3, #6]	@ zero_extendqisi2
 474 0098 07F10E02 		add	r2, r7, #14
 475 009c 07F11001 		add	r1, r7, #16
 476 00a0 1846     		mov	r0, r3
 477 00a2 FFF7FEFF 		bl	bshal_gpio_decode_pin
 141:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (port) {
 478              		.loc 1 141 6
 479 00a6 3B69     		ldr	r3, [r7, #16]
 480              		.loc 1 141 5
 481 00a8 002B     		cmp	r3, #0
 482 00aa 0AD0     		beq	.L32
 142:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		GPIO_InitStruct.Mode = GPIO_MODE_AF_INPUT;
 483              		.loc 1 142 24
 484 00ac 0023     		movs	r3, #0
 485 00ae BB61     		str	r3, [r7, #24]
 143:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		GPIO_InitStruct.Pin = pin;
ARM GAS  /tmp/ccxOFJ1B.s 			page 12


 486              		.loc 1 143 23
 487 00b0 FB89     		ldrh	r3, [r7, #14]
 488 00b2 7B61     		str	r3, [r7, #20]
 144:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		HAL_GPIO_Init(port, &GPIO_InitStruct);
 489              		.loc 1 144 3
 490 00b4 3B69     		ldr	r3, [r7, #16]
 491 00b6 07F11402 		add	r2, r7, #20
 492 00ba 1146     		mov	r1, r2
 493 00bc 1846     		mov	r0, r3
 494 00be FFF7FEFF 		bl	HAL_GPIO_Init
 495              	.L32:
 145:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	}
 146:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 147:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// nss, ncd as output
 148:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	// irq as input (or as pin interrupt)
 149:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->nss_pin, &port, &pin);
 496              		.loc 1 149 2
 497 00c2 7B68     		ldr	r3, [r7, #4]
 498 00c4 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 499 00c6 07F10E02 		add	r2, r7, #14
 500 00ca 07F11001 		add	r1, r7, #16
 501 00ce 1846     		mov	r0, r3
 502 00d0 FFF7FEFF 		bl	bshal_gpio_decode_pin
 150:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (port) {
 503              		.loc 1 150 6
 504 00d4 3B69     		ldr	r3, [r7, #16]
 505              		.loc 1 150 5
 506 00d6 002B     		cmp	r3, #0
 507 00d8 0AD0     		beq	.L33
 151:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 508              		.loc 1 151 25
 509 00da 0123     		movs	r3, #1
 510 00dc BB61     		str	r3, [r7, #24]
 152:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Pin = pin;
 511              		.loc 1 152 24
 512 00de FB89     		ldrh	r3, [r7, #14]
 513 00e0 7B61     		str	r3, [r7, #20]
 153:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			HAL_GPIO_Init(port, &GPIO_InitStruct);
 514              		.loc 1 153 4
 515 00e2 3B69     		ldr	r3, [r7, #16]
 516 00e4 07F11402 		add	r2, r7, #20
 517 00e8 1146     		mov	r1, r2
 518 00ea 1846     		mov	r0, r3
 519 00ec FFF7FEFF 		bl	HAL_GPIO_Init
 520              	.L33:
 154:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		}
 155:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(config->nss_pin, true);
 521              		.loc 1 155 29
 522 00f0 7B68     		ldr	r3, [r7, #4]
 523 00f2 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 524              		.loc 1 155 2
 525 00f4 0121     		movs	r1, #1
 526 00f6 1846     		mov	r0, r3
 527 00f8 FFF7FEFF 		bl	bshal_gpio_write_pin
 156:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 157:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->ncd_pin, &port, &pin);
 528              		.loc 1 157 2
ARM GAS  /tmp/ccxOFJ1B.s 			page 13


 529 00fc 7B68     		ldr	r3, [r7, #4]
 530 00fe 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 531 0100 07F10E02 		add	r2, r7, #14
 532 0104 07F11001 		add	r1, r7, #16
 533 0108 1846     		mov	r0, r3
 534 010a FFF7FEFF 		bl	bshal_gpio_decode_pin
 158:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (port) {
 535              		.loc 1 158 6
 536 010e 3B69     		ldr	r3, [r7, #16]
 537              		.loc 1 158 5
 538 0110 002B     		cmp	r3, #0
 539 0112 0AD0     		beq	.L34
 159:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 540              		.loc 1 159 25
 541 0114 0123     		movs	r3, #1
 542 0116 BB61     		str	r3, [r7, #24]
 160:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Pin = pin;
 543              		.loc 1 160 24
 544 0118 FB89     		ldrh	r3, [r7, #14]
 545 011a 7B61     		str	r3, [r7, #20]
 161:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			HAL_GPIO_Init(port, &GPIO_InitStruct);
 546              		.loc 1 161 4
 547 011c 3B69     		ldr	r3, [r7, #16]
 548 011e 07F11402 		add	r2, r7, #20
 549 0122 1146     		mov	r1, r2
 550 0124 1846     		mov	r0, r3
 551 0126 FFF7FEFF 		bl	HAL_GPIO_Init
 552              	.L34:
 162:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		}
 163:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(config->ncd_pin, true);
 553              		.loc 1 163 29
 554 012a 7B68     		ldr	r3, [r7, #4]
 555 012c 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 556              		.loc 1 163 2
 557 012e 0121     		movs	r1, #1
 558 0130 1846     		mov	r0, r3
 559 0132 FFF7FEFF 		bl	bshal_gpio_write_pin
 164:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 165:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_decode_pin(config->nrs_pin, &port, &pin);
 560              		.loc 1 165 2
 561 0136 7B68     		ldr	r3, [r7, #4]
 562 0138 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 563 013a 07F10E02 		add	r2, r7, #14
 564 013e 07F11001 		add	r1, r7, #16
 565 0142 1846     		mov	r0, r3
 566 0144 FFF7FEFF 		bl	bshal_gpio_decode_pin
 166:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (port) {
 567              		.loc 1 166 6
 568 0148 3B69     		ldr	r3, [r7, #16]
 569              		.loc 1 166 5
 570 014a 002B     		cmp	r3, #0
 571 014c 0AD0     		beq	.L35
 167:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 572              		.loc 1 167 25
 573 014e 0123     		movs	r3, #1
 574 0150 BB61     		str	r3, [r7, #24]
 168:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			GPIO_InitStruct.Pin = pin;
ARM GAS  /tmp/ccxOFJ1B.s 			page 14


 575              		.loc 1 168 24
 576 0152 FB89     		ldrh	r3, [r7, #14]
 577 0154 7B61     		str	r3, [r7, #20]
 169:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 			HAL_GPIO_Init(port, &GPIO_InitStruct);
 578              		.loc 1 169 4
 579 0156 3B69     		ldr	r3, [r7, #16]
 580 0158 07F11402 		add	r2, r7, #20
 581 015c 1146     		mov	r1, r2
 582 015e 1846     		mov	r0, r3
 583 0160 FFF7FEFF 		bl	HAL_GPIO_Init
 584              	.L35:
 170:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 		}
 171:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(config->nrs_pin, true);
 585              		.loc 1 171 29
 586 0164 7B68     		ldr	r3, [r7, #4]
 587 0166 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 588              		.loc 1 171 2
 589 0168 0121     		movs	r1, #1
 590 016a 1846     		mov	r0, r3
 591 016c FFF7FEFF 		bl	bshal_gpio_write_pin
 592              	.L27:
 172:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** }
 593              		.loc 1 172 1
 594 0170 1846     		mov	r0, r3
 595 0172 2837     		adds	r7, r7, #40
 596              		.cfi_def_cfa_offset 8
 597 0174 BD46     		mov	sp, r7
 598              		.cfi_def_cfa_register 13
 599              		@ sp needed
 600 0176 80BD     		pop	{r7, pc}
 601              		.cfi_endproc
 602              	.LFE66:
 604              		.section	.text.bshal_spim_transceive,"ax",%progbits
 605              		.align	1
 606              		.global	bshal_spim_transceive
 607              		.syntax unified
 608              		.thumb
 609              		.thumb_func
 610              		.fpu softvfp
 612              	bshal_spim_transceive:
 613              	.LFB67:
 173:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 174:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** int bshal_spim_transceive(bshal_spim_t *bshal_spim, void *data, size_t size) {
 614              		.loc 1 174 78
 615              		.cfi_startproc
 616              		@ args = 0, pretend = 0, frame = 24
 617              		@ frame_needed = 1, uses_anonymous_args = 0
 618 0000 80B5     		push	{r7, lr}
 619              		.cfi_def_cfa_offset 8
 620              		.cfi_offset 7, -8
 621              		.cfi_offset 14, -4
 622 0002 88B0     		sub	sp, sp, #32
 623              		.cfi_def_cfa_offset 40
 624 0004 02AF     		add	r7, sp, #8
 625              		.cfi_def_cfa 7, 32
 626 0006 F860     		str	r0, [r7, #12]
 627 0008 B960     		str	r1, [r7, #8]
ARM GAS  /tmp/ccxOFJ1B.s 			page 15


 628 000a 7A60     		str	r2, [r7, #4]
 175:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(bshal_spim->nss_pin, false);
 629              		.loc 1 175 33
 630 000c FB68     		ldr	r3, [r7, #12]
 631 000e DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 632              		.loc 1 175 2
 633 0010 0021     		movs	r1, #0
 634 0012 1846     		mov	r0, r3
 635 0014 FFF7FEFF 		bl	bshal_gpio_write_pin
 176:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int result = HAL_SPI_TransmitReceive(bshal_spim->drv_specific, data, data, size, 1000);
 636              		.loc 1 176 49
 637 0018 FB68     		ldr	r3, [r7, #12]
 638 001a 1868     		ldr	r0, [r3]
 639              		.loc 1 176 15
 640 001c 7B68     		ldr	r3, [r7, #4]
 641 001e 9BB2     		uxth	r3, r3
 642 0020 4FF47A72 		mov	r2, #1000
 643 0024 0092     		str	r2, [sp]
 644 0026 BA68     		ldr	r2, [r7, #8]
 645 0028 B968     		ldr	r1, [r7, #8]
 646 002a FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 647 002e 0346     		mov	r3, r0
 648              		.loc 1 176 6
 649 0030 7B61     		str	r3, [r7, #20]
 177:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(bshal_spim->nss_pin, true);
 650              		.loc 1 177 33
 651 0032 FB68     		ldr	r3, [r7, #12]
 652 0034 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 653              		.loc 1 177 2
 654 0036 0121     		movs	r1, #1
 655 0038 1846     		mov	r0, r3
 656 003a FFF7FEFF 		bl	bshal_gpio_write_pin
 178:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	return result;
 657              		.loc 1 178 9
 658 003e 7B69     		ldr	r3, [r7, #20]
 179:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** }
 659              		.loc 1 179 1
 660 0040 1846     		mov	r0, r3
 661 0042 1837     		adds	r7, r7, #24
 662              		.cfi_def_cfa_offset 8
 663 0044 BD46     		mov	sp, r7
 664              		.cfi_def_cfa_register 13
 665              		@ sp needed
 666 0046 80BD     		pop	{r7, pc}
 667              		.cfi_endproc
 668              	.LFE67:
 670              		.section	.text.bshal_spim_transmit,"ax",%progbits
 671              		.align	1
 672              		.global	bshal_spim_transmit
 673              		.syntax unified
 674              		.thumb
 675              		.thumb_func
 676              		.fpu softvfp
 678              	bshal_spim_transmit:
 679              	.LFB68:
 180:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 
 181:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** int bshal_spim_transmit(bshal_spim_t *bshal_spim, void *data, size_t size, bool nostop) {
ARM GAS  /tmp/ccxOFJ1B.s 			page 16


 680              		.loc 1 181 89
 681              		.cfi_startproc
 682              		@ args = 0, pretend = 0, frame = 24
 683              		@ frame_needed = 1, uses_anonymous_args = 0
 684 0000 80B5     		push	{r7, lr}
 685              		.cfi_def_cfa_offset 8
 686              		.cfi_offset 7, -8
 687              		.cfi_offset 14, -4
 688 0002 86B0     		sub	sp, sp, #24
 689              		.cfi_def_cfa_offset 32
 690 0004 00AF     		add	r7, sp, #0
 691              		.cfi_def_cfa_register 7
 692 0006 F860     		str	r0, [r7, #12]
 693 0008 B960     		str	r1, [r7, #8]
 694 000a 7A60     		str	r2, [r7, #4]
 695 000c FB70     		strb	r3, [r7, #3]
 182:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	//bshal_gpio_write_pin(bshal_spim->nss_pin, false);
 183:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int result = HAL_SPI_Transmit(bshal_spim->drv_specific, data,  size, 1000);
 696              		.loc 1 183 42
 697 000e FB68     		ldr	r3, [r7, #12]
 698 0010 1868     		ldr	r0, [r3]
 699              		.loc 1 183 15
 700 0012 7B68     		ldr	r3, [r7, #4]
 701 0014 9AB2     		uxth	r2, r3
 702 0016 4FF47A73 		mov	r3, #1000
 703 001a B968     		ldr	r1, [r7, #8]
 704 001c FFF7FEFF 		bl	HAL_SPI_Transmit
 705 0020 0346     		mov	r3, r0
 706              		.loc 1 183 6
 707 0022 7B61     		str	r3, [r7, #20]
 184:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	//if (!nostop) bshal_gpio_write_pin(bshal_spim->nss_pin, true);
 185:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	return result;
 708              		.loc 1 185 9
 709 0024 7B69     		ldr	r3, [r7, #20]
 186:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** }
 710              		.loc 1 186 1
 711 0026 1846     		mov	r0, r3
 712 0028 1837     		adds	r7, r7, #24
 713              		.cfi_def_cfa_offset 8
 714 002a BD46     		mov	sp, r7
 715              		.cfi_def_cfa_register 13
 716              		@ sp needed
 717 002c 80BD     		pop	{r7, pc}
 718              		.cfi_endproc
 719              	.LFE68:
 721              		.section	.text.bshal_spim_recveive,"ax",%progbits
 722              		.align	1
 723              		.global	bshal_spim_recveive
 724              		.syntax unified
 725              		.thumb
 726              		.thumb_func
 727              		.fpu softvfp
 729              	bshal_spim_recveive:
 730              	.LFB69:
 187:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** int bshal_spim_recveive(bshal_spim_t *bshal_spim, void *data, size_t size, bool nostop) {
 731              		.loc 1 187 89
 732              		.cfi_startproc
ARM GAS  /tmp/ccxOFJ1B.s 			page 17


 733              		@ args = 0, pretend = 0, frame = 24
 734              		@ frame_needed = 1, uses_anonymous_args = 0
 735 0000 80B5     		push	{r7, lr}
 736              		.cfi_def_cfa_offset 8
 737              		.cfi_offset 7, -8
 738              		.cfi_offset 14, -4
 739 0002 86B0     		sub	sp, sp, #24
 740              		.cfi_def_cfa_offset 32
 741 0004 00AF     		add	r7, sp, #0
 742              		.cfi_def_cfa_register 7
 743 0006 F860     		str	r0, [r7, #12]
 744 0008 B960     		str	r1, [r7, #8]
 745 000a 7A60     		str	r2, [r7, #4]
 746 000c FB70     		strb	r3, [r7, #3]
 188:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	bshal_gpio_write_pin(bshal_spim->nss_pin, false);
 747              		.loc 1 188 33
 748 000e FB68     		ldr	r3, [r7, #12]
 749 0010 DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 750              		.loc 1 188 2
 751 0012 0021     		movs	r1, #0
 752 0014 1846     		mov	r0, r3
 753 0016 FFF7FEFF 		bl	bshal_gpio_write_pin
 189:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	int result = HAL_SPI_Receive(bshal_spim->drv_specific,  data, size, 1000);
 754              		.loc 1 189 41
 755 001a FB68     		ldr	r3, [r7, #12]
 756 001c 1868     		ldr	r0, [r3]
 757              		.loc 1 189 15
 758 001e 7B68     		ldr	r3, [r7, #4]
 759 0020 9AB2     		uxth	r2, r3
 760 0022 4FF47A73 		mov	r3, #1000
 761 0026 B968     		ldr	r1, [r7, #8]
 762 0028 FFF7FEFF 		bl	HAL_SPI_Receive
 763 002c 0346     		mov	r3, r0
 764              		.loc 1 189 6
 765 002e 7B61     		str	r3, [r7, #20]
 190:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	if (!nostop) bshal_gpio_write_pin(bshal_spim->nss_pin, true);
 766              		.loc 1 190 6
 767 0030 FB78     		ldrb	r3, [r7, #3]
 768 0032 83F00103 		eor	r3, r3, #1
 769 0036 DBB2     		uxtb	r3, r3
 770              		.loc 1 190 5
 771 0038 002B     		cmp	r3, #0
 772 003a 05D0     		beq	.L42
 773              		.loc 1 190 46 discriminator 1
 774 003c FB68     		ldr	r3, [r7, #12]
 775 003e DB79     		ldrb	r3, [r3, #7]	@ zero_extendqisi2
 776              		.loc 1 190 15 discriminator 1
 777 0040 0121     		movs	r1, #1
 778 0042 1846     		mov	r0, r3
 779 0044 FFF7FEFF 		bl	bshal_gpio_write_pin
 780              	.L42:
 191:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** 	return result;
 781              		.loc 1 191 9
 782 0048 7B69     		ldr	r3, [r7, #20]
 192:../../lib/libhalglue/bshal/stm32/bshal_spim_stm32f1.c **** }
 783              		.loc 1 192 1
 784 004a 1846     		mov	r0, r3
ARM GAS  /tmp/ccxOFJ1B.s 			page 18


 785 004c 1837     		adds	r7, r7, #24
 786              		.cfi_def_cfa_offset 8
 787 004e BD46     		mov	sp, r7
 788              		.cfi_def_cfa_register 13
 789              		@ sp needed
 790 0050 80BD     		pop	{r7, pc}
 791              		.cfi_endproc
 792              	.LFE69:
 794              		.text
 795              	.Letext0:
 796              		.file 2 "/usr/lib/gcc/arm-none-eabi/11.2.0/include/stddef.h"
 797              		.file 3 "/usr/arm-none-eabi/include/machine/_default_types.h"
 798              		.file 4 "/usr/arm-none-eabi/include/sys/_stdint.h"
 799              		.file 5 "../../ext/STM32CubeF1/Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 800              		.file 6 "../../ext/STM32CubeF1/Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 801              		.file 7 "../../ext/STM32CubeF1/Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 802              		.file 8 "../../ext/STM32CubeF1/Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 803              		.file 9 "../../ext/STM32CubeF1/Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 804              		.file 10 "../../lib/libhalglue/bshal/bshal_spim.h"
 805              		.file 11 "../../lib/libhalglue/bshal/stm32/bshal_gpio_stm32.h"
 806              		.file 12 "../../ext/STM32CubeF1/Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc.h"
ARM GAS  /tmp/ccxOFJ1B.s 			page 19


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bshal_spim_stm32f1.c
     /tmp/ccxOFJ1B.s:16     .bss.m_spim:0000000000000000 $d
     /tmp/ccxOFJ1B.s:19     .bss.m_spim:0000000000000000 m_spim
     /tmp/ccxOFJ1B.s:22     .text.bshal_spim_config:0000000000000000 $t
     /tmp/ccxOFJ1B.s:30     .text.bshal_spim_config:0000000000000000 bshal_spim_config
     /tmp/ccxOFJ1B.s:289    .text.bshal_spim_config:0000000000000178 $d
     /tmp/ccxOFJ1B.s:293    .text.bshal_spim_config:0000000000000188 $t
     /tmp/ccxOFJ1B.s:359    .text.bshal_spim_config:00000000000001d8 $d
     /tmp/ccxOFJ1B.s:369    .text.bshal_spim_init:0000000000000000 $t
     /tmp/ccxOFJ1B.s:376    .text.bshal_spim_init:0000000000000000 bshal_spim_init
     /tmp/ccxOFJ1B.s:605    .text.bshal_spim_transceive:0000000000000000 $t
     /tmp/ccxOFJ1B.s:612    .text.bshal_spim_transceive:0000000000000000 bshal_spim_transceive
     /tmp/ccxOFJ1B.s:671    .text.bshal_spim_transmit:0000000000000000 $t
     /tmp/ccxOFJ1B.s:678    .text.bshal_spim_transmit:0000000000000000 bshal_spim_transmit
     /tmp/ccxOFJ1B.s:722    .text.bshal_spim_recveive:0000000000000000 $t
     /tmp/ccxOFJ1B.s:729    .text.bshal_spim_recveive:0000000000000000 bshal_spim_recveive
                           .group:0000000000000000 wm4.0.1098e563ef56396ca346ad6c5e97276e
                           .group:0000000000000000 wm4.ieeefp.h.77.af21f134a392aadc2c66139cb51ca3a9
                           .group:0000000000000000 wm4._newlib_version.h.4.bfdf54b0af045d4a71376ae00f63a22c
                           .group:0000000000000000 wm4.newlib.h.18.1c9fedb6b3cd797cff253cc0fd593ef2
                           .group:0000000000000000 wm4.features.h.22.fad1cec3bc7ff06488171438dbdcfd02
                           .group:0000000000000000 wm4.config.h.224.c701144a7b0518c6ee9b9b5465b79f81
                           .group:0000000000000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:0000000000000000 wm4.stdlib.h.13.4ed386f5c1a80d71e72172885d946ef2
                           .group:0000000000000000 wm4.stddef.h.181.13772e73e5434e8cc4fafaaddad2b5da
                           .group:0000000000000000 wm4.stddef.h.39.cf3ebec0bc8c9e3d2f276a64e0fe5e7a
                           .group:0000000000000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:0000000000000000 wm4.stddef.h.155.3588ebfdd1e8c7ede80509bb9c3b8009
                           .group:0000000000000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:0000000000000000 wm4._types.h.127.34941de1b2539d59d5cac00e0dd27a45
                           .group:0000000000000000 wm4.reent.h.17.e292bf8b0bec6c96e131a54347145a30
                           .group:0000000000000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:0000000000000000 wm4.reent.h.77.dcd6129ff07fe81bd5636db29abe53b2
                           .group:0000000000000000 wm4.cdefs.h.49.39045112216f6a021dbdffe3bf5accce
                           .group:0000000000000000 wm4.alloca.h.8.dfc0c703c47ec3e69746825b17d9e66d
                           .group:0000000000000000 wm4.stdlib.h.56.f4862cfbf4363a1db01842d5bdf72c18
                           .group:0000000000000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:0000000000000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:0000000000000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:0000000000000000 wm4.stdbool.h.29.4a1c88fe569adb8d03217dd16982ca34
                           .group:0000000000000000 wm4.stm32f1xx.h.39.e8c98c5ce2cd95856eed179966374e12
                           .group:0000000000000000 wm4.stm32f103xb.h.38.ec967d5ad9d3269cb0788eebda048e38
                           .group:0000000000000000 wm4.cmsis_version.h.32.4d5822004c01a829a975260e854b5f8e
                           .group:0000000000000000 wm4.core_cm3.h.66.fc46cac19810db8f98d67da7ef88f42c
                           .group:0000000000000000 wm4.cmsis_gcc.h.26.4f5798e999d5690b80e6ded3ecc94b37
                           .group:0000000000000000 wm4.core_cm3.h.127.f4474120f1a7524deb56f9d74ff175da
                           .group:0000000000000000 wm4.stm32f103xb.h.573.10249aa7473ca93be896fed94046a725
                           .group:0000000000000000 wm4.stm32f1xx.h.162.96b09079a093c34dbd7f0b85cbd0ddee
                           .group:0000000000000000 wm4.stm32f1xx_hal_conf.h.24.fb218a6cd2ee35d840b3eac0f5fb4119
                           .group:0000000000000000 wm4.stm32_hal_legacy.h.23.91ba5b544a4c2be2620a1e7ff0049e10
                           .group:0000000000000000 wm4.stm32f1xx_hal_def.h.57.41a4613fd5751fa2224a0bf945cee91b
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.95.21591bbc513aaa813c0b8640c3b32517
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc_ex.h.22.8763f99bc1e3e2dcf0febe9161d81b37
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.1202.f8e5f9e0cf4eef7840facf5396029056
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.22.fa638d688dcc57ca806fe6a7831b0d04
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio_ex.h.22.51a50ef3512cd78017ce666a32d364bf
ARM GAS  /tmp/ccxOFJ1B.s 			page 20


                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.263.f5ebf2f545ade59412ab9261c8e35dc4
                           .group:0000000000000000 wm4.stm32f1xx_hal_exti.h.22.e26491d042c8079c3ca67eca341af862
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.22.3c14338534886827bf3aeaa2a7f412a1
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma_ex.h.22.001ac4d7f81ccbdcae49bd65c13858c8
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.409.cafcd2cfe701091535636be537c18293
                           .group:0000000000000000 wm4.stm32f1xx_hal_can.h.22.9c5cbafab9070e25b2f93744f73f31d3
                           .group:0000000000000000 wm4.stm32f1xx_hal_cortex.h.22.b5f4174bb6a50d95405567b8f50e0900
                           .group:0000000000000000 wm4.stm32f1xx_hal_adc.h.23.7d9534ac2977bed50266ba8246ab0e90
                           .group:0000000000000000 wm4.stm32f1xx_hal_adc_ex.h.22.3f3261b879b4e7059748d94dd89f7d18
                           .group:0000000000000000 wm4.stm32f1xx_hal_crc.h.22.87a86a55c6bcf304cab68a78bda4e4b0
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash.h.22.5cea9a7210e6315b41724b47b5fdf203
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash_ex.h.22.d4e19c21f2a86fa2f8ec2c2d5f1ab2af
                           .group:0000000000000000 wm4.stm32f1xx_hal_i2c.h.22.ad52786857e2aa8ebdf15f14f11ce081
                           .group:0000000000000000 wm4.stm32f1xx_hal_iwdg.h.22.fb89d7d74008a11634b49f24b2a7251c
                           .group:0000000000000000 wm4.stm32f1xx_hal_pwr.h.22.3438c476faafc3240bf146f143df3fcd
                           .group:0000000000000000 wm4.stm32f1xx_hal_rtc.h.22.2e6c4901b3fecdb0d30ea29b38e42312
                           .group:0000000000000000 wm4.stm32f1xx_hal_rtc_ex.h.22.7132215fff3c2f214804b30db0033252
                           .group:0000000000000000 wm4.stm32f1xx_hal_spi.h.22.b31d455e8b6e1263b36c3848e181fcd3
                           .group:0000000000000000 wm4.stm32f1xx_hal_tim.h.22.a16e206564e97dbace9faae59a0d6008
                           .group:0000000000000000 wm4.stm32f1xx_hal_uart.h.22.5f7992e497faa36aa98f09f7214f4dbb
                           .group:0000000000000000 wm4.stm32f1xx_hal_usart.h.22.2faa5f38db3b50ec6d148ec053db51df
                           .group:0000000000000000 wm4.stm32f1xx_hal_irda.h.22.d5842d01b8e511da8aab9dac5eab084d
                           .group:0000000000000000 wm4.stm32f1xx_hal_smartcard.h.22.910d31efb108bad068ed688d89837f4b
                           .group:0000000000000000 wm4.stm32f1xx_hal_wwdg.h.22.b35f34e70a149b77d65030a8695a70d2
                           .group:0000000000000000 wm4.stm32f1xx_ll_usb.h.22.573a89b5589ed8d93ea72c39c5d12974
                           .group:0000000000000000 wm4.stm32f1xx_hal_pcd.h.161.76733d98d42c8efa1b20a15947173729
                           .group:0000000000000000 wm4.stm32f1xx_hal.h.88.91065c0692bed6019c34f1e9c00589fd
                           .group:0000000000000000 wm4.hal.h.172.6e20687bda8e7d4c44873f5dcdab8a03

UNDEFINED SYMBOLS
HAL_RCC_GetPCLK2Freq
HAL_RCC_GetPCLK1Freq
HAL_SPI_Init
bshal_gpio_decode_pin
HAL_GPIO_Init
bshal_gpio_write_pin
HAL_SPI_TransmitReceive
HAL_SPI_Transmit
HAL_SPI_Receive
