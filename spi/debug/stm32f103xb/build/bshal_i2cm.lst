ARM GAS  /tmp/ccYgHIn5.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 6
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bshal_i2cm.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.bshal_i2cm_send,"ax",%progbits
  16              		.align	1
  17              		.global	bshal_i2cm_send
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	bshal_i2cm_send:
  25              	.LFB0:
  26              		.file 1 "../../lib/libhalglue/bshal/bshal_i2cm.c"
   1:../../lib/libhalglue/bshal/bshal_i2cm.c **** /*
   2:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	License:	MIT
   3:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	File:		bshal_i2c.c
   4:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
   5:../../lib/libhalglue/bshal/bshal_i2cm.c ****     Copyright (c) 2018, 2019, 2021
   6:../../lib/libhalglue/bshal/bshal_i2cm.c **** 								Andr√© van Schoubroeck <andre@blaatschaap.be>
   7:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
   8:../../lib/libhalglue/bshal/bshal_i2cm.c ****     Permission is hereby granted, free of charge, to any person obtaining a copy
   9:../../lib/libhalglue/bshal/bshal_i2cm.c ****     of this software and associated documentation files (the "Software"), to deal
  10:../../lib/libhalglue/bshal/bshal_i2cm.c ****     in the Software without restriction, including without limitation the rights
  11:../../lib/libhalglue/bshal/bshal_i2cm.c ****     to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  12:../../lib/libhalglue/bshal/bshal_i2cm.c ****     copies of the Software, and to permit persons to whom the Software is
  13:../../lib/libhalglue/bshal/bshal_i2cm.c ****     furnished to do so, subject to the following conditions:
  14:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  15:../../lib/libhalglue/bshal/bshal_i2cm.c ****     The above copyright notice and this permission notice shall be included in all
  16:../../lib/libhalglue/bshal/bshal_i2cm.c ****     copies or substantial portions of the Software.
  17:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  18:../../lib/libhalglue/bshal/bshal_i2cm.c ****     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  19:../../lib/libhalglue/bshal/bshal_i2cm.c ****     IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  20:../../lib/libhalglue/bshal/bshal_i2cm.c ****     FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  21:../../lib/libhalglue/bshal/bshal_i2cm.c ****     AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  22:../../lib/libhalglue/bshal/bshal_i2cm.c ****     LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  23:../../lib/libhalglue/bshal/bshal_i2cm.c ****     OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  24:../../lib/libhalglue/bshal/bshal_i2cm.c ****     SOFTWARE.
  25:../../lib/libhalglue/bshal/bshal_i2cm.c **** */
  26:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  27:../../lib/libhalglue/bshal/bshal_i2cm.c **** #include "bshal_i2cm.h"
  28:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  29:../../lib/libhalglue/bshal/bshal_i2cm.c **** #include <stdint.h>
  30:../../lib/libhalglue/bshal/bshal_i2cm.c **** #include <string.h>
  31:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  32:../../lib/libhalglue/bshal/bshal_i2cm.c **** int bshal_i2cm_send(bshal_i2cm_instance_t *i2c_instance, uint8_t address,
ARM GAS  /tmp/ccYgHIn5.s 			page 2


  33:../../lib/libhalglue/bshal/bshal_i2cm.c **** 		void *p_data, uint8_t length, bool nostop) {
  27              		.loc 1 33 46
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 16
  30              		@ frame_needed = 1, uses_anonymous_args = 0
  31 0000 90B5     		push	{r4, r7, lr}
  32              		.cfi_def_cfa_offset 12
  33              		.cfi_offset 4, -12
  34              		.cfi_offset 7, -8
  35              		.cfi_offset 14, -4
  36 0002 87B0     		sub	sp, sp, #28
  37              		.cfi_def_cfa_offset 40
  38 0004 02AF     		add	r7, sp, #8
  39              		.cfi_def_cfa 7, 32
  40 0006 F860     		str	r0, [r7, #12]
  41 0008 7A60     		str	r2, [r7, #4]
  42 000a 1A46     		mov	r2, r3
  43 000c 0B46     		mov	r3, r1
  44 000e FB72     		strb	r3, [r7, #11]
  45 0010 1346     		mov	r3, r2
  46 0012 BB72     		strb	r3, [r7, #10]
  34:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	if (!i2c_instance)
  47              		.loc 1 34 5
  48 0014 FB68     		ldr	r3, [r7, #12]
  49 0016 002B     		cmp	r3, #0
  50 0018 02D1     		bne	.L2
  35:../../lib/libhalglue/bshal/bshal_i2cm.c **** 		return -1;
  51              		.loc 1 35 10
  52 001a 4FF0FF33 		mov	r3, #-1
  53 001e 13E0     		b	.L3
  54              	.L2:
  36:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	return i2c_instance->i2cm_send ?
  55              		.loc 1 36 21
  56 0020 FB68     		ldr	r3, [r7, #12]
  57 0022 5B68     		ldr	r3, [r3, #4]
  37:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_send(i2c_instance->drv_specific, address, p_data,
  38:../../lib/libhalglue/bshal/bshal_i2cm.c **** 					length, nostop) :
  58              		.loc 1 38 22
  59 0024 002B     		cmp	r3, #0
  60 0026 0DD0     		beq	.L4
  37:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_send(i2c_instance->drv_specific, address, p_data,
  61              		.loc 1 37 16
  62 0028 FB68     		ldr	r3, [r7, #12]
  63 002a 5C68     		ldr	r4, [r3, #4]
  37:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_send(i2c_instance->drv_specific, address, p_data,
  64              		.loc 1 37 4
  65 002c FB68     		ldr	r3, [r7, #12]
  66 002e 1868     		ldr	r0, [r3]
  67 0030 BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
  68 0032 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
  69 0034 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
  70 0038 0093     		str	r3, [sp]
  71 003a 1346     		mov	r3, r2
  72 003c 7A68     		ldr	r2, [r7, #4]
  73 003e A047     		blx	r4
  74              	.LVL0:
  75 0040 0346     		mov	r3, r0
ARM GAS  /tmp/ccYgHIn5.s 			page 3


  76              		.loc 1 38 22
  77 0042 01E0     		b	.L3
  78              	.L4:
  79              		.loc 1 38 22 is_stmt 0 discriminator 1
  80 0044 6FF00103 		mvn	r3, #1
  81              	.L3:
  39:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			I2C_NO_INIT;
  40:../../lib/libhalglue/bshal/bshal_i2cm.c **** }
  82              		.loc 1 40 1 is_stmt 1
  83 0048 1846     		mov	r0, r3
  84 004a 1437     		adds	r7, r7, #20
  85              		.cfi_def_cfa_offset 12
  86 004c BD46     		mov	sp, r7
  87              		.cfi_def_cfa_register 13
  88              		@ sp needed
  89 004e 90BD     		pop	{r4, r7, pc}
  90              		.cfi_endproc
  91              	.LFE0:
  93              		.section	.text.bshal_i2cm_recv,"ax",%progbits
  94              		.align	1
  95              		.global	bshal_i2cm_recv
  96              		.syntax unified
  97              		.thumb
  98              		.thumb_func
  99              		.fpu softvfp
 101              	bshal_i2cm_recv:
 102              	.LFB1:
  41:../../lib/libhalglue/bshal/bshal_i2cm.c **** int bshal_i2cm_recv(bshal_i2cm_instance_t *i2c_instance, uint8_t address,
  42:../../lib/libhalglue/bshal/bshal_i2cm.c **** 		void *p_data, uint8_t length, bool nostop) {
 103              		.loc 1 42 46
 104              		.cfi_startproc
 105              		@ args = 4, pretend = 0, frame = 16
 106              		@ frame_needed = 1, uses_anonymous_args = 0
 107 0000 90B5     		push	{r4, r7, lr}
 108              		.cfi_def_cfa_offset 12
 109              		.cfi_offset 4, -12
 110              		.cfi_offset 7, -8
 111              		.cfi_offset 14, -4
 112 0002 87B0     		sub	sp, sp, #28
 113              		.cfi_def_cfa_offset 40
 114 0004 02AF     		add	r7, sp, #8
 115              		.cfi_def_cfa 7, 32
 116 0006 F860     		str	r0, [r7, #12]
 117 0008 7A60     		str	r2, [r7, #4]
 118 000a 1A46     		mov	r2, r3
 119 000c 0B46     		mov	r3, r1
 120 000e FB72     		strb	r3, [r7, #11]
 121 0010 1346     		mov	r3, r2
 122 0012 BB72     		strb	r3, [r7, #10]
  43:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	if (!i2c_instance)
 123              		.loc 1 43 5
 124 0014 FB68     		ldr	r3, [r7, #12]
 125 0016 002B     		cmp	r3, #0
 126 0018 02D1     		bne	.L7
  44:../../lib/libhalglue/bshal/bshal_i2cm.c **** 		return -1;
 127              		.loc 1 44 10
 128 001a 4FF0FF33 		mov	r3, #-1
ARM GAS  /tmp/ccYgHIn5.s 			page 4


 129 001e 13E0     		b	.L8
 130              	.L7:
  45:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	return i2c_instance->i2cm_recv ?
 131              		.loc 1 45 21
 132 0020 FB68     		ldr	r3, [r7, #12]
 133 0022 9B68     		ldr	r3, [r3, #8]
  46:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_recv(i2c_instance->drv_specific, address, p_data,
  47:../../lib/libhalglue/bshal/bshal_i2cm.c **** 					length, nostop) :
 134              		.loc 1 47 22
 135 0024 002B     		cmp	r3, #0
 136 0026 0DD0     		beq	.L9
  46:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_recv(i2c_instance->drv_specific, address, p_data,
 137              		.loc 1 46 16
 138 0028 FB68     		ldr	r3, [r7, #12]
 139 002a 9C68     		ldr	r4, [r3, #8]
  46:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_recv(i2c_instance->drv_specific, address, p_data,
 140              		.loc 1 46 4
 141 002c FB68     		ldr	r3, [r7, #12]
 142 002e 1868     		ldr	r0, [r3]
 143 0030 BA7A     		ldrb	r2, [r7, #10]	@ zero_extendqisi2
 144 0032 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 145 0034 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
 146 0038 0093     		str	r3, [sp]
 147 003a 1346     		mov	r3, r2
 148 003c 7A68     		ldr	r2, [r7, #4]
 149 003e A047     		blx	r4
 150              	.LVL1:
 151 0040 0346     		mov	r3, r0
 152              		.loc 1 47 22
 153 0042 01E0     		b	.L8
 154              	.L9:
 155              		.loc 1 47 22 is_stmt 0 discriminator 1
 156 0044 6FF00103 		mvn	r3, #1
 157              	.L8:
  48:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			I2C_NO_INIT;
  49:../../lib/libhalglue/bshal/bshal_i2cm.c **** }
 158              		.loc 1 49 1 is_stmt 1
 159 0048 1846     		mov	r0, r3
 160 004a 1437     		adds	r7, r7, #20
 161              		.cfi_def_cfa_offset 12
 162 004c BD46     		mov	sp, r7
 163              		.cfi_def_cfa_register 13
 164              		@ sp needed
 165 004e 90BD     		pop	{r4, r7, pc}
 166              		.cfi_endproc
 167              	.LFE1:
 169              		.section	.text.bshal_i2cm_isok,"ax",%progbits
 170              		.align	1
 171              		.global	bshal_i2cm_isok
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 175              		.fpu softvfp
 177              	bshal_i2cm_isok:
 178              	.LFB2:
  50:../../lib/libhalglue/bshal/bshal_i2cm.c **** int bshal_i2cm_isok(bshal_i2cm_instance_t *i2c_instance, uint8_t address) {
 179              		.loc 1 50 75
ARM GAS  /tmp/ccYgHIn5.s 			page 5


 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 8
 182              		@ frame_needed = 1, uses_anonymous_args = 0
 183 0000 80B5     		push	{r7, lr}
 184              		.cfi_def_cfa_offset 8
 185              		.cfi_offset 7, -8
 186              		.cfi_offset 14, -4
 187 0002 82B0     		sub	sp, sp, #8
 188              		.cfi_def_cfa_offset 16
 189 0004 00AF     		add	r7, sp, #0
 190              		.cfi_def_cfa_register 7
 191 0006 7860     		str	r0, [r7, #4]
 192 0008 0B46     		mov	r3, r1
 193 000a FB70     		strb	r3, [r7, #3]
  51:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	if (!i2c_instance)
 194              		.loc 1 51 5
 195 000c 7B68     		ldr	r3, [r7, #4]
 196 000e 002B     		cmp	r3, #0
 197 0010 02D1     		bne	.L12
  52:../../lib/libhalglue/bshal/bshal_i2cm.c **** 		return -1;
 198              		.loc 1 52 10
 199 0012 4FF0FF33 		mov	r3, #-1
 200 0016 0EE0     		b	.L13
 201              	.L12:
  53:../../lib/libhalglue/bshal/bshal_i2cm.c **** 	return i2c_instance->i2cm_isok ?
 202              		.loc 1 53 21
 203 0018 7B68     		ldr	r3, [r7, #4]
 204 001a DB68     		ldr	r3, [r3, #12]
  54:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			i2c_instance->i2cm_isok(i2c_instance->drv_specific, address) :
 205              		.loc 1 54 65
 206 001c 002B     		cmp	r3, #0
 207 001e 08D0     		beq	.L14
 208              		.loc 1 54 16 discriminator 1
 209 0020 7B68     		ldr	r3, [r7, #4]
 210 0022 DB68     		ldr	r3, [r3, #12]
 211              		.loc 1 54 4 discriminator 1
 212 0024 7A68     		ldr	r2, [r7, #4]
 213 0026 1268     		ldr	r2, [r2]
 214 0028 F978     		ldrb	r1, [r7, #3]	@ zero_extendqisi2
 215 002a 1046     		mov	r0, r2
 216 002c 9847     		blx	r3
 217              	.LVL2:
 218 002e 0346     		mov	r3, r0
 219              		.loc 1 54 65 discriminator 1
 220 0030 01E0     		b	.L13
 221              	.L14:
 222              		.loc 1 54 65 is_stmt 0 discriminator 2
 223 0032 6FF00103 		mvn	r3, #1
 224              	.L13:
  55:../../lib/libhalglue/bshal/bshal_i2cm.c **** 			I2C_NO_INIT;
  56:../../lib/libhalglue/bshal/bshal_i2cm.c **** }
 225              		.loc 1 56 1 is_stmt 1
 226 0036 1846     		mov	r0, r3
 227 0038 0837     		adds	r7, r7, #8
 228              		.cfi_def_cfa_offset 8
 229 003a BD46     		mov	sp, r7
 230              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccYgHIn5.s 			page 6


 231              		@ sp needed
 232 003c 80BD     		pop	{r7, pc}
 233              		.cfi_endproc
 234              	.LFE2:
 236              		.section	.text.bshal_i2cm_send_reg,"ax",%progbits
 237              		.align	1
 238              		.global	bshal_i2cm_send_reg
 239              		.syntax unified
 240              		.thumb
 241              		.thumb_func
 242              		.fpu softvfp
 244              	bshal_i2cm_send_reg:
 245              	.LFB3:
  57:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  58:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  59:../../lib/libhalglue/bshal/bshal_i2cm.c **** // Convenience functions
  60:../../lib/libhalglue/bshal/bshal_i2cm.c **** int bshal_i2cm_send_reg(bshal_i2cm_instance_t* i2c_instance, uint8_t address, uint8_t reg, uint8_t 
 246              		.loc 1 60 125
 247              		.cfi_startproc
 248              		@ args = 4, pretend = 0, frame = 24
 249              		@ frame_needed = 1, uses_anonymous_args = 0
 250 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 251              		.cfi_def_cfa_offset 28
 252              		.cfi_offset 4, -28
 253              		.cfi_offset 5, -24
 254              		.cfi_offset 6, -20
 255              		.cfi_offset 7, -16
 256              		.cfi_offset 8, -12
 257              		.cfi_offset 9, -8
 258              		.cfi_offset 14, -4
 259 0004 89B0     		sub	sp, sp, #36
 260              		.cfi_def_cfa_offset 64
 261 0006 02AF     		add	r7, sp, #8
 262              		.cfi_def_cfa 7, 56
 263 0008 F860     		str	r0, [r7, #12]
 264 000a 7B60     		str	r3, [r7, #4]
 265 000c 0B46     		mov	r3, r1
 266 000e FB72     		strb	r3, [r7, #11]
 267 0010 1346     		mov	r3, r2
 268 0012 BB72     		strb	r3, [r7, #10]
 269              		.loc 1 60 125
 270 0014 6B46     		mov	r3, sp
 271 0016 1E46     		mov	r6, r3
  61:../../lib/libhalglue/bshal/bshal_i2cm.c ****     int result;
  62:../../lib/libhalglue/bshal/bshal_i2cm.c ****     /*
  63:../../lib/libhalglue/bshal/bshal_i2cm.c ****     result = i2c_send(i2c_instance, address, &reg, 1, true);
  64:../../lib/libhalglue/bshal/bshal_i2cm.c ****     if (result) return result;
  65:../../lib/libhalglue/bshal/bshal_i2cm.c ****     return i2c_send(i2c_instance, address, p_data, length, false);
  66:../../lib/libhalglue/bshal/bshal_i2cm.c ****     */
  67:../../lib/libhalglue/bshal/bshal_i2cm.c ****     uint8_t buffer[1+length];
 272              		.loc 1 67 21
 273 0018 97F83830 		ldrb	r3, [r7, #56]	@ zero_extendqisi2
 274 001c 591C     		adds	r1, r3, #1
 275              		.loc 1 67 13
 276 001e 4B1E     		subs	r3, r1, #1
 277 0020 7B61     		str	r3, [r7, #20]
 278 0022 0A46     		mov	r2, r1
ARM GAS  /tmp/ccYgHIn5.s 			page 7


 279 0024 0023     		movs	r3, #0
 280 0026 9046     		mov	r8, r2
 281 0028 9946     		mov	r9, r3
 282 002a 4FF00002 		mov	r2, #0
 283 002e 4FF00003 		mov	r3, #0
 284 0032 4FEAC903 		lsl	r3, r9, #3
 285 0036 43EA5873 		orr	r3, r3, r8, lsr #29
 286 003a 4FEAC802 		lsl	r2, r8, #3
 287 003e 0A46     		mov	r2, r1
 288 0040 0023     		movs	r3, #0
 289 0042 1446     		mov	r4, r2
 290 0044 1D46     		mov	r5, r3
 291 0046 4FF00002 		mov	r2, #0
 292 004a 4FF00003 		mov	r3, #0
 293 004e EB00     		lsls	r3, r5, #3
 294 0050 43EA5473 		orr	r3, r3, r4, lsr #29
 295 0054 E200     		lsls	r2, r4, #3
 296 0056 0B46     		mov	r3, r1
 297 0058 0733     		adds	r3, r3, #7
 298 005a DB08     		lsrs	r3, r3, #3
 299 005c DB00     		lsls	r3, r3, #3
 300 005e ADEB030D 		sub	sp, sp, r3
 301 0062 02AB     		add	r3, sp, #8
 302 0064 0033     		adds	r3, r3, #0
 303 0066 3B61     		str	r3, [r7, #16]
  68:../../lib/libhalglue/bshal/bshal_i2cm.c ****     buffer[0] = reg;
 304              		.loc 1 68 15
 305 0068 3B69     		ldr	r3, [r7, #16]
 306 006a BA7A     		ldrb	r2, [r7, #10]
 307 006c 1A70     		strb	r2, [r3]
  69:../../lib/libhalglue/bshal/bshal_i2cm.c ****     memcpy(buffer+1, p_data, length);
 308              		.loc 1 69 5
 309 006e 3B69     		ldr	r3, [r7, #16]
 310 0070 0133     		adds	r3, r3, #1
 311 0072 97F83820 		ldrb	r2, [r7, #56]	@ zero_extendqisi2
 312 0076 7968     		ldr	r1, [r7, #4]
 313 0078 1846     		mov	r0, r3
 314 007a FFF7FEFF 		bl	memcpy
  70:../../lib/libhalglue/bshal/bshal_i2cm.c ****     return bshal_i2cm_send(i2c_instance, address, buffer, 1+length, false);
 315              		.loc 1 70 12
 316 007e 97F83830 		ldrb	r3, [r7, #56]
 317 0082 0133     		adds	r3, r3, #1
 318 0084 DBB2     		uxtb	r3, r3
 319 0086 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 320 0088 0022     		movs	r2, #0
 321 008a 0092     		str	r2, [sp]
 322 008c 3A69     		ldr	r2, [r7, #16]
 323 008e F868     		ldr	r0, [r7, #12]
 324 0090 FFF7FEFF 		bl	bshal_i2cm_send
 325 0094 0346     		mov	r3, r0
 326 0096 B546     		mov	sp, r6
  71:../../lib/libhalglue/bshal/bshal_i2cm.c **** }
 327              		.loc 1 71 1
 328 0098 1846     		mov	r0, r3
 329 009a 1C37     		adds	r7, r7, #28
 330              		.cfi_def_cfa_offset 28
 331 009c BD46     		mov	sp, r7
ARM GAS  /tmp/ccYgHIn5.s 			page 8


 332              		.cfi_def_cfa_register 13
 333              		@ sp needed
 334 009e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 335              		.cfi_endproc
 336              	.LFE3:
 338              		.section	.text.bshal_i2cm_recv_reg,"ax",%progbits
 339              		.align	1
 340              		.global	bshal_i2cm_recv_reg
 341              		.syntax unified
 342              		.thumb
 343              		.thumb_func
 344              		.fpu softvfp
 346              	bshal_i2cm_recv_reg:
 347              	.LFB4:
  72:../../lib/libhalglue/bshal/bshal_i2cm.c **** 
  73:../../lib/libhalglue/bshal/bshal_i2cm.c **** int bshal_i2cm_recv_reg(bshal_i2cm_instance_t* i2c_instance, uint8_t address, uint8_t reg, uint8_t 
 348              		.loc 1 73 125
 349              		.cfi_startproc
 350              		@ args = 4, pretend = 0, frame = 24
 351              		@ frame_needed = 1, uses_anonymous_args = 0
 352 0000 80B5     		push	{r7, lr}
 353              		.cfi_def_cfa_offset 8
 354              		.cfi_offset 7, -8
 355              		.cfi_offset 14, -4
 356 0002 88B0     		sub	sp, sp, #32
 357              		.cfi_def_cfa_offset 40
 358 0004 02AF     		add	r7, sp, #8
 359              		.cfi_def_cfa 7, 32
 360 0006 F860     		str	r0, [r7, #12]
 361 0008 7B60     		str	r3, [r7, #4]
 362 000a 0B46     		mov	r3, r1
 363 000c FB72     		strb	r3, [r7, #11]
 364 000e 1346     		mov	r3, r2
 365 0010 BB72     		strb	r3, [r7, #10]
  74:../../lib/libhalglue/bshal/bshal_i2cm.c ****     int result;
  75:../../lib/libhalglue/bshal/bshal_i2cm.c ****     result = i2c_send(i2c_instance, address, &reg, 1, true);
 366              		.loc 1 75 14
 367 0012 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 368 0014 07F10A02 		add	r2, r7, #10
 369 0018 0123     		movs	r3, #1
 370 001a 0093     		str	r3, [sp]
 371 001c 0123     		movs	r3, #1
 372 001e F868     		ldr	r0, [r7, #12]
 373 0020 FFF7FEFF 		bl	i2c_send
 374 0024 7861     		str	r0, [r7, #20]
  76:../../lib/libhalglue/bshal/bshal_i2cm.c ****     if (result) return result;
 375              		.loc 1 76 8
 376 0026 7B69     		ldr	r3, [r7, #20]
 377 0028 002B     		cmp	r3, #0
 378 002a 01D0     		beq	.L19
 379              		.loc 1 76 24 discriminator 1
 380 002c 7B69     		ldr	r3, [r7, #20]
 381 002e 09E0     		b	.L20
 382              	.L19:
  77:../../lib/libhalglue/bshal/bshal_i2cm.c ****     return bshal_i2cm_recv(i2c_instance, address, p_data, length, false);
 383              		.loc 1 77 12
 384 0030 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
ARM GAS  /tmp/ccYgHIn5.s 			page 9


 385 0034 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 386 0036 0022     		movs	r2, #0
 387 0038 0092     		str	r2, [sp]
 388 003a 7A68     		ldr	r2, [r7, #4]
 389 003c F868     		ldr	r0, [r7, #12]
 390 003e FFF7FEFF 		bl	bshal_i2cm_recv
 391 0042 0346     		mov	r3, r0
 392              	.L20:
  78:../../lib/libhalglue/bshal/bshal_i2cm.c **** }
 393              		.loc 1 78 1
 394 0044 1846     		mov	r0, r3
 395 0046 1837     		adds	r7, r7, #24
 396              		.cfi_def_cfa_offset 8
 397 0048 BD46     		mov	sp, r7
 398              		.cfi_def_cfa_register 13
 399              		@ sp needed
 400 004a 80BD     		pop	{r7, pc}
 401              		.cfi_endproc
 402              	.LFE4:
 404              		.text
 405              	.Letext0:
 406              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 407              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 408              		.file 4 "../../lib/libhalglue/bshal/bshal_i2cm.h"
 409              		.file 5 "/usr/lib/gcc/arm-none-eabi/11.2.0/include/stddef.h"
 410              		.file 6 "/usr/arm-none-eabi/include/string.h"
ARM GAS  /tmp/ccYgHIn5.s 			page 10


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bshal_i2cm.c
     /tmp/ccYgHIn5.s:16     .text.bshal_i2cm_send:0000000000000000 $t
     /tmp/ccYgHIn5.s:24     .text.bshal_i2cm_send:0000000000000000 bshal_i2cm_send
     /tmp/ccYgHIn5.s:94     .text.bshal_i2cm_recv:0000000000000000 $t
     /tmp/ccYgHIn5.s:101    .text.bshal_i2cm_recv:0000000000000000 bshal_i2cm_recv
     /tmp/ccYgHIn5.s:170    .text.bshal_i2cm_isok:0000000000000000 $t
     /tmp/ccYgHIn5.s:177    .text.bshal_i2cm_isok:0000000000000000 bshal_i2cm_isok
     /tmp/ccYgHIn5.s:237    .text.bshal_i2cm_send_reg:0000000000000000 $t
     /tmp/ccYgHIn5.s:244    .text.bshal_i2cm_send_reg:0000000000000000 bshal_i2cm_send_reg
     /tmp/ccYgHIn5.s:339    .text.bshal_i2cm_recv_reg:0000000000000000 $t
     /tmp/ccYgHIn5.s:346    .text.bshal_i2cm_recv_reg:0000000000000000 bshal_i2cm_recv_reg
                           .group:0000000000000000 wm4.0.1098e563ef56396ca346ad6c5e97276e
                           .group:0000000000000000 wm4._newlib_version.h.4.bfdf54b0af045d4a71376ae00f63a22c
                           .group:0000000000000000 wm4.features.h.33.318b64d71e0957639cfb30f1db1f7ec8
                           .group:0000000000000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
                           .group:0000000000000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:0000000000000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:0000000000000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:0000000000000000 wm4.stdbool.h.29.4a1c88fe569adb8d03217dd16982ca34
                           .group:0000000000000000 wm4.bshal_i2cm.h.17.c7329ec6dbd3040670862aca99bbdc7c
                           .group:0000000000000000 wm4.newlib.h.8.7cb3972cd43265932d4782d5eb589854
                           .group:0000000000000000 wm4.ieeefp.h.77.af21f134a392aadc2c66139cb51ca3a9
                           .group:0000000000000000 wm4.config.h.224.c701144a7b0518c6ee9b9b5465b79f81
                           .group:0000000000000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:0000000000000000 wm4.stddef.h.39.144cf5ddcd53cbfdac30259dc1a6c87f
                           .group:0000000000000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:0000000000000000 wm4.stddef.h.155.3588ebfdd1e8c7ede80509bb9c3b8009
                           .group:0000000000000000 wm4._types.h.127.34941de1b2539d59d5cac00e0dd27a45
                           .group:0000000000000000 wm4.reent.h.17.e292bf8b0bec6c96e131a54347145a30
                           .group:0000000000000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:0000000000000000 wm4.reent.h.77.dcd6129ff07fe81bd5636db29abe53b2
                           .group:0000000000000000 wm4.cdefs.h.49.39045112216f6a021dbdffe3bf5accce
                           .group:0000000000000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:0000000000000000 wm4.stddef.h.155.ba788add86a0e365f264484f110c3c29

UNDEFINED SYMBOLS
memcpy
i2c_send
